<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="http://code.responsivevoice.org/responsivevoice.js"></script>
    <script src="http://code.jquery.com/jquery-3.3.1.min.js"></script>
    <link href="dropzone.css" type="text/css" rel="stylesheet" />
    <script src="dropzone.js"></script>
    <title>Document</title>
    <style type="text/css">
        body{
            background-color: #000000;
        }
        #arabic_input
        {
            width: 99%;
            height: 50%;
        }

        #content{
            width: 655px;
            margin: auto;
        }

        #speack_button{
            margin-left: 40%;
            width: 150px;
            height: 50px;
            font-size: 28px;
            border-radius: 12px;
            background-color: #0c4effc2;
            color: #fff;
        }
        #lang{
            display:inline-block;
        }
        
    </style>
</head>
<body>
    <div id="content">
        <div method="post" id="my-awesome-dropzone" action="vvupload.php" class="dropzone"></div>
        <br>
        <textarea rows="20" id="arabic_input"></textarea>
        <br>
        <button id="speack_button" onclick="speek();" >Speek</button>
    </div>
</body>

<script>
    function detectLanguage(text)
    {
        var text = /[A-Za-z0-9]+/.test(text);
        var lang = ( text ? 'English' : 'Arabic' );
        return lang;
    }

    function speek()
    {
        var content = $('#arabic_input').val();
        if( !content )
        {
             alert("Please enter text in the input or choose a valid pdf/file");
             return false;
        }
        lang = detectLanguage(content);
        var language = ( lang == 'Arabic' ? "Arabic Female" : "UK English Female" ) ;
        responsiveVoice.speak(content, language);
    }

    Dropzone.options.myAwesomeDropzone = {
      /*renameFilename: function (filename) 
        {                
            fileN = new Date().getTime() + '_' + filename
            document.getElementById("_2nd_file").value =fileN;
        },*/
      acceptedFiles: ".pdf",
      init: function() {
        this.on("success", 
            function(file, paramName) 
            { 
                var url = "http://159.203.66.57:8000/read_pdf.php?file_name="+paramName;
                $.ajax({
                    url:url,  
                    success:function(data) {
                      $('#arabic_input').val(data);
                    }
                });
            }
        );
      }
     
    };
</script>

</html>